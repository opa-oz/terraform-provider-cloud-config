---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cloud-config Resource - cloud-config"
subcategory: ""
description: |-
  Cloud-config file in-memory representation
---

# cloud-config (Resource)

Cloud-config file in-memory representation



<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `chpasswd` (Block, Optional) The chpasswd config key accepts a dictionary containing either (or both) of users and expire.

 - The users key is used to assign a password to a corresponding pre-existing user.
 - The expire key is used to set whether to expire all user passwords specified by this module, such that a password will need to be reset on the user’s next login. (see [below for nested schema](#nestedblock--chpasswd))
- `create_hostname_file` (Boolean) If `false`, the hostname file (e.g. `/etc/hostname`) will not be created if it does not exist. On systems that use systemd, setting `create_hostname_file` to `false` will set the hostname transiently. If true, the hostname file will always be created and the hostname will be set statically on systemd systems. Default: `true`.
- `fqdn` (String) The fully qualified domain name to set.
- `hostname` (String) The hostname to set.
- `locale` (String) The locale to set as the system’s locale (e.g. ar_PS).
- `locale_configfile` (String) The file in which to write the locale configuration (defaults to the distro’s default location).
- `manage_etc_hosts` (Boolean) Whether to manage `/etc/hosts` on the system. If true, render the hosts file using `/etc/cloud/templates/hosts.tmpl` replacing `$hostname` and `$fdqn`.
- `manage_etc_hosts_localhost` (Boolean) Append a 127.0.1.1 entry that resolves from FQDN and hostname every boot.
- `package_reboot_if_required` (Boolean) Set `true` to reboot the system if required by presence of `/var/run/reboot-required`. Default: `false`.
- `package_update` (Boolean) Set `true` to update packages. Happens before upgrade or install. Default: `false`.
- `package_upgrade` (Boolean) Set `true` to upgrade packages. Happens before install. Default: `false`.
- `packages` (List of String) An array containing a package specification
- `prefer_fqdn_over_hostname` (Boolean) If true, the fqdn will be used if it is set. If false, the hostname will be used. If unset, the result is distro-dependent.
- `preserve_hostname` (Boolean) If true, the hostname will not be changed. Default: `false`.
- `runcmd` (List of String) Run arbitrary commands at a rc.local-like time-frame with output to the console. Each item will be interpreted by `sh`.
- `ssh_authorized_keys` (List of String) The SSH public keys to add `.ssh/authorized_keys` in the default user’s home directory.
- `ssh_pwauth` (Boolean) Sets whether or not to accept password authentication. true will enable password auth. false will disable. *Default*: leave the value unchanged. 

In order for this config to be applied, SSH may need to be restarted. On systemd systems, this restart will only happen if the SSH service has already been started. On non-systemd systems, a restart will be attempted regardless of the service state.

_Changed in version 22.3. Use of non-boolean values for this field is deprecated._
- `timezone` (String) The timezone to use as represented in /usr/share/zoneinfo.

### Read-Only

- `content` (String, Sensitive) YAML content of cloud-init file

<a id="nestedblock--chpasswd"></a>
### Nested Schema for `chpasswd`

Optional:

- `expire` (Boolean) Whether to expire all user passwords such that a password will need to be reset on the user’s next login. Default: `true`.
- `users` (Block List) This key represents a list of existing users to set passwords for. Each item under users contains the following required keys: *name* and *password* or in the case of a randomly generated password, *name* and *type*. The *type* key has a default value of 'hash', and may alternatively be set to 'text' or 'RANDOM'. Randomly generated passwords may be insecure, use at your own risk. (see [below for nested schema](#nestedblock--chpasswd--users))

<a id="nestedblock--chpasswd--users"></a>
### Nested Schema for `chpasswd.users`

Required:

- `name` (String) User's name

Optional:

- `password` (String) User's password
- `type` (String) The *type* key has a default value of 'hash', and may alternatively be set to 'text' or 'RANDOM'.
