---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cloud-config Resource - cloud-config"
subcategory: ""
description: |-
  Cloud-config file in-memory representation
---

# cloud-config (Resource)

Cloud-config file in-memory representation



<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `apk_repos` (Block, Optional) This module handles configuration of the Alpine Package Keeper (APK) /etc/apk/repositories file. (see [below for nested schema](#nestedblock--apk_repos))
- `apt_pipelining` (Block, Optional) This module configures APT’s `Acquire::http::Pipeline-Depth` option, which controls how APT handles HTTP pipelining. It may be useful for pipelining to be disabled, because some web servers (such as S3) do not pipeline properly (LP: #948461). (see [below for nested schema](#nestedblock--apt_pipelining))
- `autoinstall` (Block, Optional) **Cloud-init ignores this key and its values. It is used by Subiquity, the Ubuntu Autoinstaller. See: https://ubuntu.com/server/docs/install/autoinstall-reference.**

Cloud-init is used by the Ubuntu installer in two stages. The autoinstall key may contain a configuration for the Ubuntu installer.

Cloud-init verifies that an autoinstall key contains a version key and that the installer package is present on the system.

The Ubuntu installer might pass part of this configuration to cloud-init during a later boot as part of the install process. See [the Ubuntu installer documentation](https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#user-data) for more information. Please direct Ubuntu installer questions to their IRC channel (#ubuntu-server on Libera). (see [below for nested schema](#nestedblock--autoinstall))
- `bootcmd` (List of String) This module runs arbitrary commands very early in the boot process, only slightly after a boothook would run. This is very similar to a boothook, but more user friendly. Commands can be specified as strings.

bootcmd should only be used for things that could not be done later in the boot process.

When writing files, do not use /tmp dir as it races with systemd-tmpfiles-clean (LP: #1707222). Use /run/somedir instead.

Use of INSTANCE_ID variable within this module is deprecated. Use [jinja templates](https://cloudinit.readthedocs.io/en/latest/explanation/format.html#user-data-formats-jinja) with [ v1.instance_id ](https://cloudinit.readthedocs.io/en/latest/explanation/instancedata.html#v1-instance-id) instead.
- `byobu_by_default` (String) This module controls whether Byobu is enabled or disabled system-wide and for the default system user. If Byobu is to be enabled, this module will ensure it is installed. Likewise, if Byobu is to be disabled, it will be removed (if installed).

Valid configuration options for this module are:
 - enable-system: enable Byobu system-wide
 - enable-user: enable Byobu for the default user
 - disable-system: disable Byobu system-wide
 - disable-user: disable Byobu for the default user
 - enable: enable Byobu both system-wide and for the default user
 - disable: disable Byobu for all users
 - user: alias for enable-user
 - system: alias for enable-system
- `ca_certs` (Block, Optional) This module adds CA certificates to the system’s CA store and updates any related files using the appropriate OS-specific utility. The default CA certificates can be disabled/deleted from use by the system with the configuration option remove_defaults.

Certificates must be specified using valid YAML. To specify a multi-line certificate, the YAML multi-line list syntax must be used.

Alpine Linux requires the ca-certificates package to be installed in order to provide the update-ca-certificates command. (see [below for nested schema](#nestedblock--ca_certs))
- `chpasswd` (Block, Optional) The chpasswd config key accepts a dictionary containing either (or both) of users and expire.

 - The users key is used to assign a password to a corresponding pre-existing user.
 - The expire key is used to set whether to expire all user passwords specified by this module, such that a password will need to be reset on the user’s next login. (see [below for nested schema](#nestedblock--chpasswd))
- `create_hostname_file` (Boolean) If `false`, the hostname file (e.g. `/etc/hostname`) will not be created if it does not exist. On systems that use systemd, setting `create_hostname_file` to `false` will set the hostname transiently. If true, the hostname file will always be created and the hostname will be set statically on systemd systems. Default: `true`.
- `disable_ec2_metadata` (Boolean) Set `true` to disable IPv4 routes to EC2 metadata. Default: `false`.
- `fan` (Block, Optional) This module installs, configures and starts the Ubuntu fan network system ([Read more about Ubuntu Fan](https://wiki.ubuntu.com/FanNetworking)).

If cloud-init sees a fan entry in cloud-config it will:

 - Write config_path with the contents of the config key
 - Install the package ubuntu-fan if it is not installed
 - Ensure the service is started (or restarted if was previously running)

Additionally, the ubuntu-fan package will be automatically installed if not present. (see [below for nested schema](#nestedblock--fan))
- `final_message` (String) This module configures the final message that cloud-init writes. The message is specified as a Jinja template with the following variables set:

 - **version**: cloud-init version
 - **timestamp**: time at cloud-init finish
 - **datasource**: cloud-init data source
 - **uptime**: system uptime

This message is written to the cloud-init log (usually /var/log/cloud-init.log) as well as stderr (which usually redirects to /var/log/cloud-init-output.log).

Upon exit, this module writes the system uptime, timestamp, and cloud-init version to /var/lib/cloud/instance/boot-finished independent of any user data specified for this module.
- `fqdn` (String) The fully qualified domain name to set.
- `groups` (List of String) [WIP] List of user groups to create
- `growpart` (Block, Optional) Growpart resizes partitions to fill the available disk space. This is useful for cloud instances with a larger amount of disk space available than the pristine image uses, as it allows the instance to automatically make use of the extra space.

Note that this only works if the partition to be resized is the last one on a disk with classic partitioning scheme (MBR, BSD, GPT). LVM, Btrfs and ZFS have no such restrictions.

The devices on which to run growpart are specified as a list under the devices key.

There is some functionality overlap between this module and the growroot functionality of cloud-initramfs-tools. However, there are some situations where one tool is able to function and the other is not. The default configuration for both should work for most cloud instances. To explicitly prevent cloud-initramfs-tools from running growroot, the file /etc/growroot-disabled can be created.

By default, both growroot and cc_growpart will check for the existence of this file and will not run if it is present. However, this file can be ignored for cc_growpart by setting ignore_growroot_disabled to true. Read more about cloud-initramfs-tools.

On FreeBSD, there is also the growfs service, which has a lot of overlap with cc_growpart and cc_resizefs, but only works on the root partition. In that configuration, we use it, otherwise, we fall back to gpart.

**Note**: growfs may insert a swap partition, if none is present, unless instructed not to via growfs_swap_size=0 in either kenv(1), or rc.conf(5).

Growpart is enabled by default on the root partition. (see [below for nested schema](#nestedblock--growpart))
- `grub_dpkg` (Block, Optional) Configure which device is used as the target for GRUB installation. This module can be enabled/disabled using the enabled config key in the grub_dpkg config dict. This module automatically selects a disk using grub-probe if no installation device is specified.

The value placed into the debconf database is in the format expected by the GRUB post-install script expects. Normally, this is a /dev/disk/by-id/ value, but we do fallback to the plain disk name if a by-id name is not present.

If this module is executed inside a container, then the debconf database is seeded with empty values, and install_devices_empty is set to true. (see [below for nested schema](#nestedblock--grub_dpkg))
- `hostname` (String) The hostname to set.
- `keyboard` (Block, Optional) Handle keyboard configuration. (see [below for nested schema](#nestedblock--keyboard))
- `landscape` (Block, Optional) This module installs and configures landscape-client. The Landscape client will only be installed if the key landscape is present in config.

Landscape client configuration is given under the client key under the main landscape config key. The config parameters are not interpreted by cloud-init, but rather are converted into a ConfigObj-formatted file and written out to the [client] section in /etc/landscape/client.conf. The following default client config is provided, but can be overridden

If tags is defined, its contents should be a string delimited with a comma (“,”) rather than a list. (see [below for nested schema](#nestedblock--landscape))
- `locale` (String) The locale to set as the system’s locale (e.g. ar_PS).
- `locale_configfile` (String) The file in which to write the locale configuration (defaults to the distro’s default location).
- `manage_etc_hosts` (Boolean) Whether to manage `/etc/hosts` on the system. If true, render the hosts file using `/etc/cloud/templates/hosts.tmpl` replacing `$hostname` and `$fdqn`.
- `manage_etc_hosts_localhost` (Boolean) Append a 127.0.1.1 entry that resolves from FQDN and hostname every boot.
- `package_reboot_if_required` (Boolean) Set `true` to reboot the system if required by presence of `/var/run/reboot-required`. Default: `false`.
- `package_update` (Boolean) Set `true` to update packages. Happens before upgrade or install. Default: `false`.
- `package_upgrade` (Boolean) Set `true` to upgrade packages. Happens before install. Default: `false`.
- `packages` (List of String) [WIP] An array containing a package specification
- `phone_home` (Block, Optional) This module can be used to post data to a remote host after boot is complete.

Either all data can be posted, or a list of keys to post.

Available keys are:

- pub_key_rsa
- pub_key_ecdsa
- pub_key_ed25519
- instance_id
- hostname
- fqdn

Data is sent as x-www-form-urlencoded arguments. (see [below for nested schema](#nestedblock--phone_home))
- `power_state` (Block, Optional) This module handles shutdown/reboot after all config modules have been run. By default it will take no action, and the system will keep running unless a package installation/upgrade requires a system reboot (e.g. installing a new kernel) and package_reboot_if_required is true.

Using this module ensures that cloud-init is entirely finished with modules that would be executed. An example to distinguish delay from timeout:

If you delay 5 (5 minutes) and have a timeout of 120 (2 minutes), the max time until shutdown will be 7 minutes, though it could be as soon as 5 minutes. Cloud-init will invoke ‘shutdown +5’ after the process finishes, or when ‘timeout’ seconds have elapsed.

**NOTE**
With Alpine Linux any message value specified is ignored as Alpine’s halt, poweroff, and reboot commands do not support broadcasting a message. (see [below for nested schema](#nestedblock--power_state))
- `prefer_fqdn_over_hostname` (Boolean) If true, the fqdn will be used if it is set. If false, the hostname will be used. If unset, the result is distro-dependent.
- `preserve_hostname` (Boolean) If true, the hostname will not be changed. Default: `false`.
- `resize_rootfs` (Boolean) Resize a filesystem to use all available space on partition. This module is useful along with cc_growpart and will ensure that if the root partition has been resized, the root filesystem will be resized along with it.

By default, cc_resizefs will resize the root partition and will block the boot process while the resize command is running.

This module can be disabled altogether by setting resize_rootfs to false.

Default: true
- `resize_rootfs_no_block` (Boolean) Optionally, the resize operation can be performed in the background while cloud-init continues running modules. This can be enabled by setting resize_rootfs to noblock.
- `runcmd` (List of String) Run arbitrary commands at a rc.local-like time-frame with output to the console. Each item will be interpreted by `sh`.
- `salt_minion` (Block, Optional) This module installs, configures and starts Salt Minion. If the salt_minion key is present in the config parts, then Salt Minion will be installed and started.

Configuration for Salt Minion can be specified in the conf key under salt_minion. Any config values present there will be assigned in /etc/salt/minion. The public and private keys to use for Salt Minion can be specified with public_key and private_key respectively.

If you have a custom package name, service name, or config directory, you can specify them with pkg_name, service_name, and config_dir respectively.

Salt keys can be manually generated by salt-key --gen-keys=GEN_KEYS, where GEN_KEYS is the name of the keypair, e.g. ‘’minion’’. The keypair will be copied to /etc/salt/pki on the Minion instance. (see [below for nested schema](#nestedblock--salt_minion))
- `ssh` (Block, Optional) For security reasons it may be desirable not to write SSH host keys and their fingerprints to the console. To avoid either of them being written to the console, the emit_keys_to_console config key under the main ssh config key can be used.

To avoid the fingerprint of types of SSH host keys being written to console the ssh_fp_console_blacklist config key can be used. By default, all types of keys will have their fingerprints written to console.

To avoid host keys of a key type being written to console the ssh_key_console_blacklist config key can be used. By default, all supported host keys are written to console. (see [below for nested schema](#nestedblock--ssh))
- `ssh_authorized_keys` (List of String) The SSH public keys to add `.ssh/authorized_keys` in the default user’s home directory.
- `ssh_fp_console_blacklist` (List of String) Avoid printing matching SSH fingerprints to the system console.
- `ssh_key_console_blacklist` (List of String) Avoid printing matching SSH key types to the system console.
- `ssh_pwauth` (Boolean) Sets whether or not to accept password authentication. true will enable password auth. false will disable. *Default*: leave the value unchanged. 

In order for this config to be applied, SSH may need to be restarted. On systemd systems, this restart will only happen if the SSH service has already been started. On non-systemd systems, a restart will be attempted regardless of the service state.

_Changed in version 22.3. Use of non-boolean values for this field is deprecated._
- `timezone` (String) The timezone to use as represented in /usr/share/zoneinfo.
- `updates` (Block, Optional) This module will install the udev rules to enable hotplug if supported by the datasource and enabled in the user-data. The udev rules will be installed as /etc/udev/rules.d/90-cloud-init-hook-hotplug.rules.

When hotplug is enabled, newly added network devices will be added to the system by cloud-init. After udev detects the event, cloud-init will refresh the instance metadata from the datasource, detect the device in the updated metadata, then apply the updated network configuration.

Udev rules are installed while cloud-init is running, which means that devices which are added during boot might not be configured. To work around this limitation, one can wait until cloud-init has completed before hotplugging devices.

Currently supported datasources: **Openstack, EC2** (see [below for nested schema](#nestedblock--updates))
- `user` (Block, Optional) The user dictionary values override the `default_user` configuration from `/etc/cloud/cloud.cfg`. The user dictionary keys supported for the `default_user` are the same as the users schema. (see [below for nested schema](#nestedblock--user))
- `users` (Block List) List of users (see [below for nested schema](#nestedblock--users))

### Read-Only

- `content` (String, Sensitive) YAML content of cloud-init file

<a id="nestedblock--apk_repos"></a>
### Nested Schema for `apk_repos`

Optional:

- `alpine_repo` (Block, Optional) (see [below for nested schema](#nestedblock--apk_repos--alpine_repo))
- `local_repo_base_url` (String) The base URL of an Alpine repository containing unofficial packages.
- `preserve_repositories` (Boolean) By default, cloud-init will generate a new repositories file /etc/apk/repositories based on any valid configuration settings specified within a apk_repos section of cloud config. To disable this behavior and preserve the repositories file from the pristine image, set **preserve_repositories** to true.
The **preserve_repositories** option overrides all other config keys that would alter /etc/apk/repositories.

<a id="nestedblock--apk_repos--alpine_repo"></a>
### Nested Schema for `apk_repos.alpine_repo`

Optional:

- `base_url` (String) The base URL of an Alpine repository, or mirror, to download official packages from. If not specified then it defaults to https://alpine.global.ssl.fastly.net/alpine.
- `community_enabled` (Boolean) Whether to add the Community repo to the repositories file. By default the Community repo is not included.
- `testing_enabled` (Boolean) Whether to add the Testing repo to the repositories file. By default the Testing repo is not included. It is only recommended to use the Testing repo on a machine running the Edge version of Alpine as packages installed from Testing may have dependencies that conflict with those in non-Edge Main or Community repos.
- `version` (String) version



<a id="nestedblock--apt_pipelining"></a>
### Nested Schema for `apt_pipelining`

Optional:

- `depth` (Number) Manually specify pipeline depth. This is not recommended.
- `disable` (Boolean) Disable pipelining altogether
- `os` (Boolean) Use distro default. This is default behaivor


<a id="nestedblock--autoinstall"></a>
### Nested Schema for `autoinstall`

Optional:

- `version` (Number)


<a id="nestedblock--ca_certs"></a>
### Nested Schema for `ca_certs`

Optional:

- `remove_defaults` (Boolean) Remove default CA certificates if true. Default: `false`.
- `trusted` (List of String) List of trusted CA certificates to add.


<a id="nestedblock--chpasswd"></a>
### Nested Schema for `chpasswd`

Optional:

- `expire` (Boolean) Whether to expire all user passwords such that a password will need to be reset on the user’s next login. Default: `true`.
- `users` (Block List) This key represents a list of existing users to set passwords for. Each item under users contains the following required keys: *name* and *password* or in the case of a randomly generated password, *name* and *type*. The *type* key has a default value of 'hash', and may alternatively be set to 'text' or 'RANDOM'. Randomly generated passwords may be insecure, use at your own risk. (see [below for nested schema](#nestedblock--chpasswd--users))

<a id="nestedblock--chpasswd--users"></a>
### Nested Schema for `chpasswd.users`

Required:

- `name` (String) User's name

Optional:

- `password` (String) User's password
- `type` (String) The *type* key has a default value of 'hash', and may alternatively be set to 'text' or 'RANDOM'.



<a id="nestedblock--fan"></a>
### Nested Schema for `fan`

Optional:

- `config` (String) The fan configuration to use as a single multi-line string.
- `config_path` (String) The path to write the fan configuration to. Default: `/etc/network/fan`.


<a id="nestedblock--growpart"></a>
### Nested Schema for `growpart`

Optional:

- `devices` (List of String) The devices to resize. Each entry can either be the path to the device’s mountpoint in the filesystem or a path to the block device in ‘/dev’. Default: `[/]`
- `ignore_growroot_disabled` (Boolean) If true, ignore the presence of `/etc/growroot-disabled`. If false and the file exists, then don’t resize. Default: `false`.
- `mode` (String) The utility to use for resizing. Default: auto

Possible options:
 - auto - Use any available utility
 - growpart - Use growpart utility
 - gpart - Use BSD gpart utility
 - 'off' - Take no action.


<a id="nestedblock--grub_dpkg"></a>
### Nested Schema for `grub_dpkg`

Optional:

- `enabled` (Boolean) Whether to configure which device is used as the target for grub installation. Default: `false`.
- `grub_efi_install_devices` (String) Partition to use as target for grub installation. If unspecified, grub-probe of `/boot/efi` will be used to find the partition.
- `grub_pc_install_devices` (String) Device to use as target for grub installation. If unspecified, grub-probe of `/boot` will be used to find the device.
- `grub_pc_install_devices_empty` (Boolean) Sets values for `grub-pc/install_devices_empty`. If unspecified, will be set to true if `grub-pc/install_devices` is empty, otherwise false.


<a id="nestedblock--keyboard"></a>
### Nested Schema for `keyboard`

Optional:

- `layout` (String) Required. Keyboard layout. Corresponds to XKBLAYOUT.
- `model` (String) Keyboard model. Corresponds to XKBMODEL. Default: `pc105`.
- `options` (String) Keyboard options. Corresponds to `XKBOPTIONS`.
- `variant` (String) Required for Alpine Linux, optional otherwise. Keyboard variant. Corresponds to `XKBVARIANT`.


<a id="nestedblock--landscape"></a>
### Nested Schema for `landscape`

Optional:

- `client` (Block, Optional) (see [below for nested schema](#nestedblock--landscape--client))

<a id="nestedblock--landscape--client"></a>
### Nested Schema for `landscape.client`

Optional:

- `account_name` (String) The account this computer belongs to.
- `computer_title` (String) The title of this computer.
- `data_path` (String) The directory to store data files in. Default: `/var/lib/land‐scape/client/.`
- `http_proxy` (String) The URL of the HTTP proxy, if one is needed.
- `https_proxy` (String) The URL of the HTTPS proxy, if one is needed.
- `log_level` (String) The log level for the client. Default: `info`.
- `ping_url` (String) The URL to perform lightweight exchange initiation with. Default: `https://landscape.canonical.com/ping`
- `registration_key` (String) The account-wide key used for registering clients.
- `tags` (String) Comma separated list of tag names to be sent to the server.
- `url` (String) The Landscape server URL to connect to. Default: `https://landscape.canonical.com/message-system`.



<a id="nestedblock--phone_home"></a>
### Nested Schema for `phone_home`

Optional:

- `post` (List of String) A list of keys to post or all. Default: `all`.
- `tries` (Number) The number of times to try sending the phone home data. Default: `10`.
- `url` (String) The URL to send the phone home data to.


<a id="nestedblock--power_state"></a>
### Nested Schema for `power_state`

Optional:

- `condition` (Boolean) Apply state change only if condition is met. May be boolean true (always met), false (never met).  Defaults to 'true'
- `condition_cmd` (String) For command formatting, see the documentation for `cc_runcmd`. If exit code is 0, condition is met, otherwise not.
- `delay` (Number) Time in minutes to delay after cloud-init has finished. Can be now or an integer specifying the number of minutes to delay. Default: `now`.
- `message` (String) Optional message to display to the user when the system is powering off or rebooting.
- `mode` (String) Must be one of poweroff, halt, or reboot.
- `no_delay` (Boolean) Apply changes right after cloud-init finish. Same as `delay: now`. Default `true`
- `timeout` (Number) Time in seconds to wait for the cloud-init process to finish before executing shutdown. Default: `30`.


<a id="nestedblock--salt_minion"></a>
### Nested Schema for `salt_minion`

Optional:

- `config_dir` (String) Directory to write config files to. Default: `/etc/salt`.
- `pkg_name` (String) Package name to install. Default: `salt-minion`.
- `pki_dir` (String) Directory to write key files. Default: `config_dir/pki/minion`.
- `private_key` (String) Private key to be used by salt minion.
- `public_key` (String) Public key to be used by the salt minion.
- `service_name` (String) Service name to enable. Default: `salt-minion`.


<a id="nestedblock--ssh"></a>
### Nested Schema for `ssh`

Optional:

- `emit_keys_to_console` (Boolean) Set false to avoid printing SSH keys to system console. Default: `true`.


<a id="nestedblock--updates"></a>
### Nested Schema for `updates`

Optional:

- `network` (Block, Optional) (see [below for nested schema](#nestedblock--updates--network))

<a id="nestedblock--updates--network"></a>
### Nested Schema for `updates.network`

Optional:

- `when` (List of String) array of boot-new-instance/boot-legacy/boot/hotplug



<a id="nestedblock--user"></a>
### Nested Schema for `user`

Optional:

- `create_groups` (Boolean) Boolean set `false` to disable creation of specified user groups. Default: `true`.
- `doas` (List of String) List of doas rules to add for a user. doas or opendoas must be installed for rules to take effect.
- `expiredate` (String) Optional. Date on which the user’s account will be disabled. Default: `null`.
- `gecos` (String) Optional comment about the user, usually a comma-separated string of real name and contact information.
- `groups` (List of String) Groups to add the user to
- `hashed_passwd` (String, Sensitive) Hash of user password to be applied. This will be applied even if the user is preexisting. To generate this hash, run: `mkpasswd --method=SHA-512 --rounds=500000`. **Note**: Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `homedir` (String) Optional home dir for user. Default: `/home/<username>`.
- `inactive` (String) Optional string representing the number of days until the user is disabled.
- `lock_passwd` (Boolean) Disable password login. Default: `true`.
- `name` (String) The user’s login name. Required otherwise user creation will be skipped for this user.
- `no_create_home` (Boolean) Do not create home directory. Default: `false`.
- `no_log_init` (Boolean) Do not initialize lastlog and faillog for user. Default: `false`.
- `no_user_group` (Boolean) Do not create group named after user. Default: `false`.
- `passwd` (String, Sensitive) Hash of user password applied when user does not exist. This will NOT be applied if the user already exists. To generate this hash, run: `mkpasswd --method=SHA-512 --rounds=500000` **Note**: Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `plain_text_passwd` (String, Sensitive) Clear text of user password to be applied. This will be applied even if the user is preexisting. **Note**: SSH keys or certificates are a safer choice for logging in to your system. For local escalation, supplying a hashed password is a safer choice than plain text. Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. An exposed plain text password is an immediate security concern. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `primary_group` (String) Primary group for user. Default: `<username>`.
- `selinux_user` (String) SELinux user for user’s login. Default: the default SELinux user.
- `shell` (String) Path to the user’s login shell. Default: the host system’s default shell.
- `snapuser` (String) Specify an email address to create the user as a Snappy user through snap `create-user`. If an Ubuntu SSO account is associated with the address, username and SSH keys will be requested from there.
- `ssh_authorized_keys` (List of String) List of SSH keys to add to user’s authkeys file. Can not be combined with **ssh_redirect_user**.
- `ssh_import_id` (List of String) List of ssh ids to import for user. Can not be combined with ssh_redirect_user.
- `ssh_redirect_user` (Boolean) Boolean set to true to disable SSH logins for this user. When specified, all cloud-provided public SSH keys will be set up in a disabled state for this username. Any SSH login as this username will timeout and prompt with a message to login instead as the **default_username** for this instance. Default: `false`. This key can not be combined with **ssh_import_id** or **ssh_authorized_keys**.
- `sudo` (List of String) Changed in version 22.2.The value ``false`` is deprecated for this key, use ``null`` instead.
- `system` (Boolean) Create user as system user with no home directory. Default: `false`.
- `uid` (Number) The user’s ID. Default value [system default].


<a id="nestedblock--users"></a>
### Nested Schema for `users`

Optional:

- `create_groups` (Boolean) Boolean set `false` to disable creation of specified user groups. Default: `true`.
- `doas` (List of String) List of doas rules to add for a user. doas or opendoas must be installed for rules to take effect.
- `expiredate` (String) Optional. Date on which the user’s account will be disabled. Default: `null`.
- `gecos` (String) Optional comment about the user, usually a comma-separated string of real name and contact information.
- `groups` (List of String) Groups to add the user to
- `hashed_passwd` (String, Sensitive) Hash of user password to be applied. This will be applied even if the user is preexisting. To generate this hash, run: `mkpasswd --method=SHA-512 --rounds=500000`. **Note**: Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `homedir` (String) Optional home dir for user. Default: `/home/<username>`.
- `inactive` (String) Optional string representing the number of days until the user is disabled.
- `lock_passwd` (Boolean) Disable password login. Default: `true`.
- `name` (String) The user’s login name. Required otherwise user creation will be skipped for this user.
- `no_create_home` (Boolean) Do not create home directory. Default: `false`.
- `no_log_init` (Boolean) Do not initialize lastlog and faillog for user. Default: `false`.
- `no_user_group` (Boolean) Do not create group named after user. Default: `false`.
- `passwd` (String, Sensitive) Hash of user password applied when user does not exist. This will NOT be applied if the user already exists. To generate this hash, run: `mkpasswd --method=SHA-512 --rounds=500000` **Note**: Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `plain_text_passwd` (String, Sensitive) Clear text of user password to be applied. This will be applied even if the user is preexisting. **Note**: SSH keys or certificates are a safer choice for logging in to your system. For local escalation, supplying a hashed password is a safer choice than plain text. Your password might possibly be visible to unprivileged users on your system, depending on your cloud’s security model. An exposed plain text password is an immediate security concern. Check if your cloud’s IMDS server is visible from an unprivileged user to evaluate risk.
- `primary_group` (String) Primary group for user. Default: `<username>`.
- `selinux_user` (String) SELinux user for user’s login. Default: the default SELinux user.
- `shell` (String) Path to the user’s login shell. Default: the host system’s default shell.
- `snapuser` (String) Specify an email address to create the user as a Snappy user through snap `create-user`. If an Ubuntu SSO account is associated with the address, username and SSH keys will be requested from there.
- `ssh_authorized_keys` (List of String) List of SSH keys to add to user’s authkeys file. Can not be combined with **ssh_redirect_user**.
- `ssh_import_id` (List of String) List of ssh ids to import for user. Can not be combined with ssh_redirect_user.
- `ssh_redirect_user` (Boolean) Boolean set to true to disable SSH logins for this user. When specified, all cloud-provided public SSH keys will be set up in a disabled state for this username. Any SSH login as this username will timeout and prompt with a message to login instead as the **default_username** for this instance. Default: `false`. This key can not be combined with **ssh_import_id** or **ssh_authorized_keys**.
- `sudo` (List of String) Changed in version 22.2.The value ``false`` is deprecated for this key, use ``null`` instead.
- `system` (Boolean) Create user as system user with no home directory. Default: `false`.
- `uid` (Number) The user’s ID. Default value [system default].
